---
layout: post
title:  "[데이터베이스] 이상과 함수적 종속"
category: [데이터베이스, database]
tags:
  - 데이터베이스
  - 정규화
  - 이상(Anomaly)
  - 함수적 종속
comments: true
---

## 이상(Anomaly)
테이블에서 속성들의 `종속`으로 인해 `중복`이 발생하고, 이 `중복`으로 인해 테이블 조작시 발생하는 문제

> `수강` 테이블

| 학번 | 과목번호 | 성적 | 학년 |
|:--:|:--:|:--:|:--:|
|100|C413|A|4|
|100|E421|A|4|
|200|C123|B|3|
|300|C324|C|1|
|400|C123|A|4|
|400|C312|A|4|
|400|C324|A|4|
|400|C413|B|4|
|500|C312|B|2|

### 삽입이상(Insertion Anomaly)
\<수강> 테이블에서 한 학생이 여러 강의를 수강할 수 있으므로 학번만으로 `기본키`를 지정할 수 없다. 따라서 `학번` + `과목번호`를 합쳐서 `기본키`로 사용해야 한다. 이 때, 위 테이블에 어떤 학생이 '700'의 학번 정보와 '2'라는 학년 정보만으로 레코드를 삽입하려고 한다면 **기본키인 과목번호 부재**로 **삽입할 수 없게 되는** `삽입 이상`이 발생하게 된다.

### 삭제 이상(Deletaion Anomaly)
\<수강> 테이블에서 학번이 '200'인 학생이 수강하려 했던 과목을 취소하기 위해 해당 레코드(Raw)를 삭제하면, 그 학생의 성적 및 학년 정보까지 삭제된다. 이와 같이 `유지하고자 했던 정보까지 삭제`되어 `정보 손실`이 발생하는, 연쇄 삭제 작용이 `삭제 이상`이다

### 갱신 이상(Update Anomaly)
\<수강> 테이블에서 학번이 '400'인 학생이 학년을 '4'에서 '3'으로 변경한다면, 해당 학생의 다른 레코드의 경우 '4'를 유지하고 있기 때문에 학년에 대한 2가지 값을 가지게 된다. 이로 인해 `정보 불일치성`이 발생하게 되고, 이를 일컬어 `갱신 이상`이라고 한다.

<br><br>

## 함수적 종속
함수적 종속은 데이터의 의미를 표현하는 것으로, 데이터베이스에서 항상 유지되어야 할 조건이다.

> `학생` 테이블

| 학번 | 이름 | 학년 | 학과 |
|:--:|:--:|:--:|:--:|
|712|배찌|4|컴퓨터공학과|
|714|다오|4|기계공학과|
|725|에띠|3|컴퓨터공학과|
|413|마리드|1|한문교육과|
|243|우니|4|중어중문과|
|254|디지니|3|기계공학과|
|567|케피|2|사학과|
|656|수|3|중어중문과|
|190|모스|4|컴퓨터공학과|

- `학생` 테이블에서 기본키는 학번이다.
- 이름, 학년, 학과는 각각 학번에 함수적 종속이다.
- 이를 `학번 ➔ 이름`, `학번 ➔ 학년`,  `학번 ➔ 학과` 혹은 `학번 ➔ 이름, 학년, 학과`와 같이 기호로 표현할 수 있다.
- `X ➔ Y`의 관계를 갖을 때, X를 `결정자`, Y를 `종속자`라고 한다.

## 함수적 종속 다이어그램

> `수강` 테이블

| 학번 | 과목번호 | 성적 | 학년 |
|:--:|:--:|:--:|:--:|
|100|C413|A|4|
|100|E421|A|4|
|200|C123|B|3|
|300|C324|C|1|
|400|C123|A|4|
|400|C312|A|4|
|400|C324|A|4|
|400|C413|B|4|
|500|C312|B|2|

`수강` 테이블을 함수적 종속으로 표현하면,

```
학번, 과목번호 ➔ 성적
학번 ➔ 학년
```

이를 함수적 종속 다이어그램으로 표현하면,

![]({{site.url}}/assets/fd_diagram.png){: .center-image}

- `성적`은 `학번, 과목번호`에 **완전 함수적 종속(Full Functional Dependency)**, 완전 함수적 종속은 기본키에 완전히 종속적일 때를 일컫는다. 즉, 성적은 기본키인 학번과 과목번호 모두에 종속적이다.
- `학년`은  `학번, 과목번호`이 아닌, `학번`에만 종속되므로 **부분 함수적 종속(Partial Functional Dependency)**, 학년은 과목번호에 상관없이 한 학번에 항상 같은 학년이 온다. 즉, 학년은 기본키의 일부인 학번에 부분 종속적이다.
