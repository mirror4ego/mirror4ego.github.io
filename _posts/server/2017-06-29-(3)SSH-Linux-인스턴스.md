---
layout: post
title:  "[AWS] 3. SSH을 이용하여 Linux 인스턴스에 연결하기"
category: [AWS, aws]
tags:
  - aws
  - django
  - ssh
comments: true
---

## SSH 를 사용하여 Linux 인스턴스에 연결하기
그 전에 SSH 클라이언트를 설치한다. Linux 의 경우 기본적으로 포함되어 있다.
1. private key(.pem) 와 *user_name@public_dns_name* 을 지정한다.
2. Amazon Linux 의 경우, 사용자 이름은 `ec2_user` Ubuntu 의 경우, 사용자 이름은 `ubuntu` 또는 `root` 이다.

> Ubuntu 기준

`ssh -i /path/key_pair_name.pem ubuntu@ec2-198-51-100-1.compute-1.amazonaws.com(형태의 public_dns_name)`
<br><br>
[UNPROTECTED PRIVATE KEY FILE ERROR]
```text
WARNING: UNPROTECTED PRIVATE KEY FILE!

[...]
```
- 이와 같은 에러를 뿜뿜할 경우, chmod 400 으로 소유주만 읽을 수 있도록 권한을 설정한다.
- `chmod 400 bbungsang.pem`

다시 `ssh -i /path/key_pair_name.pem ubuntu@ec2-198-51-100-1.compute-1.amazonaws.com` 을 입력하면, 아마존 웹 서버 구동 성공!!

## AWS 명령어 입력하기
- 지금까지 UI 를 통해서 만든 인스턴스와 같이 AWS 에서 제공해주는 기능을 커맨드 라인을 통해서 실행할 수 있다.
- 이를 위해서는 `aws cli` 를 설치해야 한다.  (cli = command line interface)

> finger printer(지문)
- 공개키로 만들어낸 특정 문자열, 본래 공개키의 길이는 엄청 길다. 이를 사람이 눈으로 보고 비교할 만큼 쉽게 쓰기 위해서 있는 것이다.
- EC2 Key Pair 에 명시되어 있다.

- aws ec2 get-console-output --instance-id <해당 인터페이스의 아이디>
- 하지만 에러가 난다. UI 상에선 로그인 과정을 거쳐서 특정 유저에게 접근 권한을 부여하지만, 커맨드 라인에서는 이와 같은 과정이 없기 때문에 access key 가 필요하다.

> access key 생성
- AWS 페이지의 I AM 에서 Add User 를 통해서 유저를 생성한다.
- [Set permissions for EC2-User] : Attach existing policies directly 클릭
- [Policy type] 목록 : AmazonEC2FullAccess 선택
- secret key 는 생성 후 단 한 번만 제공해준다. 따라서 따로 저장해두는 것을 권장한다.
- [커맨드 라인] : aws configure 을 입력 후,

> ```text
AWS Access Key ID : 생성된 access key
AWS Secret Access Key : 생성된 secret key
Default region name : ap-northeast-2
Default output format : json
```
